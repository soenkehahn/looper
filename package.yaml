name: loopnaut

source-dirs: src
dependencies:
  - base
ghc-options:
  - -Wall
  - -Wno-name-shadowing

executables:
  loopnaut:
    main: loopnaut-exec.hs
    c-sources:
      - src/loop_buffer.c
    extra-libraries:
      - jack
    dependencies:
      - getopt-generics
      - hsndfile
      - hsndfile-vector
      - vector

  generate:
    main: Generate.hs
    dependencies:
      - hsndfile
      - hsndfile-vector
      - random
      - vector

tests:
  spec:
    main: Spec.hs
    source-dirs:
      - test
    c-sources:
      - src/loop_buffer.c
    extra-libraries:
      - jack
    dependencies:
      - bytestring
      - directory
      - filepath
      - hsndfile
      - hsndfile-vector
      - hspec
      - mockery
      - vector
      - process
      - getopt-generics
